{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Pamo/v0-hrm/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\r\nimport { cookies } from \"next/headers\"\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\r\n    cookies: {\r\n      getAll() {\r\n        return cookieStore.getAll()\r\n      },\r\n      setAll(cookiesToSet) {\r\n        try {\r\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\r\n        } catch {\r\n          // The \"setAll\" method was called from a Server Component.\r\n          // This can be ignored if you have proxy refreshing user sessions.\r\n        }\r\n      },\r\n    },\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0QAAO;IAEjC,OAAO,IAAA,4SAAkB,oKAAoF;QAC3G,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,kEAAkE;gBACpE;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///E:/Pamo/v0-hrm/lib/actions/employee-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport type { Employee, EmployeeWithRelations, UserRoleWithRelations } from \"@/lib/types/database\"\r\n\r\nexport async function getMyEmployee(): Promise<EmployeeWithRelations | null> {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return null\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"employees\")\r\n    .select(`\r\n      *,\r\n      department:departments(*),\r\n      position:positions(*),\r\n      manager:employees!manager_id(id, full_name, email)\r\n    `)\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"Error fetching employee:\", error)\r\n    return null\r\n  }\r\n\r\n  return data as EmployeeWithRelations\r\n}\r\n\r\nexport async function getMyRoles(): Promise<UserRoleWithRelations[]> {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return []\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"user_roles\")\r\n    .select(`\r\n      *,\r\n      role:roles(*)\r\n    `)\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"Error fetching roles:\", error)\r\n    return []\r\n  }\r\n\r\n  return (data || []) as UserRoleWithRelations[]\r\n}\r\n\r\nexport async function listEmployees(): Promise<EmployeeWithRelations[]> {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"employees\")\r\n    .select(`\r\n      *,\r\n      department:departments(*),\r\n      position:positions(*)\r\n    `)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"Error listing employees:\", error)\r\n    return []\r\n  }\r\n\r\n  return (data || []) as EmployeeWithRelations[]\r\n}\r\n\r\nexport async function getEmployee(id: string): Promise<EmployeeWithRelations | null> {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"employees\")\r\n    .select(`\r\n      *,\r\n      department:departments(*),\r\n      position:positions(*),\r\n      manager:employees!manager_id(id, full_name, email),\r\n      shift:work_shifts(*)\r\n    `)\r\n    .eq(\"id\", id)\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"Error fetching employee:\", error)\r\n    return null\r\n  }\r\n\r\n  return data as EmployeeWithRelations\r\n}\r\n\r\nexport async function updateEmployee(\r\n  id: string,\r\n  data: Partial<Pick<Employee, \"full_name\" | \"phone\" | \"department_id\" | \"position_id\" | \"shift_id\" | \"status\" | \"join_date\">>,\r\n) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase\r\n    .from(\"employees\")\r\n    .update({ ...data, updated_at: new Date().toISOString() })\r\n    .eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error updating employee:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/employees\")\r\n  revalidatePath(`/dashboard/employees/${id}`)\r\n  return { success: true }\r\n}\r\n\r\nexport async function updateMyProfile(data: Partial<Pick<Employee, \"full_name\" | \"phone\">>) {\r\n  const supabase = await createClient()\r\n\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { error } = await supabase\r\n    .from(\"employees\")\r\n    .update({ ...data, updated_at: new Date().toISOString() })\r\n    .eq(\"user_id\", user.id)\r\n\r\n  if (error) {\r\n    console.error(\"Error updating profile:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/profile\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function createEmployee(data: {\r\n  full_name: string\r\n  email: string\r\n  phone?: string | null\r\n  department_id?: string | null\r\n  position_id?: string | null\r\n  join_date?: string | null\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  // Generate employee code\r\n  const code = `NV${new Date().toISOString().slice(0, 7).replace(\"-\", \"\")}${Math.floor(Math.random() * 10000)\r\n    .toString()\r\n    .padStart(4, \"0\")}`\r\n\r\n  const { error } = await supabase.from(\"employees\").insert({\r\n    employee_code: code,\r\n    full_name: data.full_name,\r\n    email: data.email,\r\n    phone: data.phone,\r\n    department_id: data.department_id,\r\n    position_id: data.position_id,\r\n    join_date: data.join_date,\r\n    status: \"onboarding\",\r\n  })\r\n\r\n  if (error) {\r\n    console.error(\"Error creating employee:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/employees\")\r\n  return { success: true }\r\n}\r\n\r\n// Đổi phòng ban + lưu lịch sử\r\nexport async function changeDepartment(\r\n  employeeId: string,\r\n  newDepartmentId: string,\r\n  salary?: number\r\n) {\r\n  const supabase = await createClient()\r\n\r\n  // Lấy thông tin hiện tại\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"department_id, position_id\")\r\n    .eq(\"id\", employeeId)\r\n    .single()\r\n\r\n  if (!employee) return { success: false, error: \"Employee not found\" }\r\n\r\n  const today = new Date().toISOString().split(\"T\")[0]\r\n\r\n  // Đóng record lịch sử cũ\r\n  await supabase\r\n    .from(\"employee_job_history\")\r\n    .update({ end_date: today })\r\n    .eq(\"employee_id\", employeeId)\r\n    .is(\"end_date\", null)\r\n\r\n  // Tạo record lịch sử mới\r\n  await supabase.from(\"employee_job_history\").insert({\r\n    employee_id: employeeId,\r\n    department_id: newDepartmentId,\r\n    position_id: employee.position_id,\r\n    salary: salary || null,\r\n    start_date: today,\r\n  })\r\n\r\n  // Update employee\r\n  const { error } = await supabase\r\n    .from(\"employees\")\r\n    .update({ department_id: newDepartmentId, updated_at: new Date().toISOString() })\r\n    .eq(\"id\", employeeId)\r\n\r\n  if (error) {\r\n    console.error(\"Error changing department:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/employees\")\r\n  revalidatePath(`/dashboard/employees/${employeeId}`)\r\n  return { success: true }\r\n}\r\n\r\n// Đổi chức vụ + lưu lịch sử\r\nexport async function changePosition(\r\n  employeeId: string,\r\n  newPositionId: string,\r\n  salary?: number\r\n) {\r\n  const supabase = await createClient()\r\n\r\n  // Lấy thông tin hiện tại\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"department_id, position_id\")\r\n    .eq(\"id\", employeeId)\r\n    .single()\r\n\r\n  if (!employee) return { success: false, error: \"Employee not found\" }\r\n\r\n  const today = new Date().toISOString().split(\"T\")[0]\r\n\r\n  // Đóng record lịch sử cũ\r\n  await supabase\r\n    .from(\"employee_job_history\")\r\n    .update({ end_date: today })\r\n    .eq(\"employee_id\", employeeId)\r\n    .is(\"end_date\", null)\r\n\r\n  // Tạo record lịch sử mới\r\n  await supabase.from(\"employee_job_history\").insert({\r\n    employee_id: employeeId,\r\n    department_id: employee.department_id,\r\n    position_id: newPositionId,\r\n    salary: salary || null,\r\n    start_date: today,\r\n  })\r\n\r\n  // Update employee\r\n  const { error } = await supabase\r\n    .from(\"employees\")\r\n    .update({ position_id: newPositionId, updated_at: new Date().toISOString() })\r\n    .eq(\"id\", employeeId)\r\n\r\n  if (error) {\r\n    console.error(\"Error changing position:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/employees\")\r\n  revalidatePath(`/dashboard/employees/${employeeId}`)\r\n  return { success: true }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///E:/Pamo/v0-hrm/lib/actions/leave-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport type { LeaveRequest, LeaveRequestWithRelations, LeaveType } from \"@/lib/types/database\"\r\n\r\nexport async function getMyLeaveRequests(): Promise<LeaveRequest[]> {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return []\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (!employee) return []\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"leave_requests\")\r\n    .select(\"*\")\r\n    .eq(\"employee_id\", employee.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"Error fetching leave requests:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function createLeaveRequest(input: {\r\n  leave_type: LeaveType\r\n  from_date: string\r\n  to_date: string\r\n  reason?: string\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (!employee) return { success: false, error: \"Employee not found\" }\r\n\r\n  // Validate: from_date <= to_date\r\n  if (input.from_date > input.to_date) {\r\n    return { success: false, error: \"From date must be before or equal to To date\" }\r\n  }\r\n\r\n  // Validate: chống đè ngày nghỉ (overlap)\r\n  const { data: overlap } = await supabase\r\n    .from(\"leave_requests\")\r\n    .select(\"id\")\r\n    .eq(\"employee_id\", employee.id)\r\n    .neq(\"status\", \"rejected\") // Chỉ check pending và approved\r\n    .lte(\"from_date\", input.to_date)\r\n    .gte(\"to_date\", input.from_date)\r\n\r\n  if (overlap && overlap.length > 0) {\r\n    return { success: false, error: \"Leave dates overlap with existing request\" }\r\n  }\r\n\r\n  const { error } = await supabase.from(\"leave_requests\").insert({\r\n    employee_id: employee.id,\r\n    leave_type: input.leave_type,\r\n    from_date: input.from_date,\r\n    to_date: input.to_date,\r\n    reason: input.reason,\r\n    status: \"pending\",\r\n  })\r\n\r\n  if (error) {\r\n    console.error(\"Error creating leave request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function cancelLeaveRequest(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  // Chỉ có thể hủy đơn pending của mình\r\n  const { error } = await supabase\r\n    .from(\"leave_requests\")\r\n    .delete()\r\n    .eq(\"id\", id)\r\n    .eq(\"status\", \"pending\")\r\n\r\n  if (error) {\r\n    console.error(\"Error canceling leave request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function listLeaveRequests(filters?: {\r\n  status?: string\r\n  employee_id?: string\r\n}): Promise<LeaveRequestWithRelations[]> {\r\n  const supabase = await createClient()\r\n\r\n  let query = supabase\r\n    .from(\"leave_requests\")\r\n    .select(`\r\n      *,\r\n      employee:employees!employee_id(id, full_name, employee_code, department_id),\r\n      approver:employees!approver_id(id, full_name)\r\n    `)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (filters?.status) query = query.eq(\"status\", filters.status)\r\n  if (filters?.employee_id) query = query.eq(\"employee_id\", filters.employee_id)\r\n\r\n  const { data, error } = await query.limit(100)\r\n\r\n  if (error) {\r\n    console.error(\"Error listing leave requests:\", error)\r\n    return []\r\n  }\r\n\r\n  return (data || []) as LeaveRequestWithRelations[]\r\n}\r\n\r\nexport async function approveLeaveRequest(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  const { error } = await supabase\r\n    .from(\"leave_requests\")\r\n    .update({\r\n      status: \"approved\",\r\n      approver_id: employee?.id,\r\n      approved_at: new Date().toISOString(),\r\n    })\r\n    .eq(\"id\", id)\r\n    .eq(\"status\", \"pending\")\r\n\r\n  if (error) {\r\n    console.error(\"Error approving leave request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function rejectLeaveRequest(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  const { error } = await supabase\r\n    .from(\"leave_requests\")\r\n    .update({\r\n      status: \"rejected\",\r\n      approver_id: employee?.id,\r\n      approved_at: new Date().toISOString(),\r\n    })\r\n    .eq(\"id\", id)\r\n    .eq(\"status\", \"pending\")\r\n\r\n  if (error) {\r\n    console.error(\"Error rejecting leave request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  return { success: true }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///E:/Pamo/v0-hrm/lib/actions/request-type-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport type { RequestType, EmployeeRequestWithRelations } from \"@/lib/types/database\"\r\n\r\n// =============================================\r\n// REQUEST TYPES (Loại phiếu)\r\n// =============================================\r\n\r\nexport async function listRequestTypes(activeOnly = true): Promise<RequestType[]> {\r\n  const supabase = await createClient()\r\n\r\n  let query = supabase\r\n    .from(\"request_types\")\r\n    .select(\"*\")\r\n    .order(\"display_order\", { ascending: true })\r\n\r\n  if (activeOnly) {\r\n    query = query.eq(\"is_active\", true)\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) {\r\n    console.error(\"Error listing request types:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function getRequestType(id: string): Promise<RequestType | null> {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"request_types\")\r\n    .select(\"*\")\r\n    .eq(\"id\", id)\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"Error getting request type:\", error)\r\n    return null\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nexport async function createRequestType(input: {\r\n  name: string\r\n  code: string\r\n  description?: string\r\n  requires_date_range?: boolean\r\n  requires_single_date?: boolean\r\n  requires_time?: boolean\r\n  requires_time_range?: boolean\r\n  requires_reason?: boolean\r\n  requires_attachment?: boolean\r\n  affects_attendance?: boolean\r\n  affects_payroll?: boolean\r\n  deduct_leave_balance?: boolean\r\n  approval_mode?: \"any\" | \"all\"\r\n  min_approver_level?: number | null\r\n  max_approver_level?: number | null\r\n  display_order?: number\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"request_types\").insert({\r\n    name: input.name,\r\n    code: input.code.toLowerCase().replace(/\\s+/g, \"_\"),\r\n    description: input.description,\r\n    requires_date_range: input.requires_date_range ?? true,\r\n    requires_single_date: input.requires_single_date ?? false,\r\n    requires_time: input.requires_time ?? false,\r\n    requires_time_range: input.requires_time_range ?? false,\r\n    requires_reason: input.requires_reason ?? true,\r\n    requires_attachment: input.requires_attachment ?? false,\r\n    affects_attendance: input.affects_attendance ?? false,\r\n    affects_payroll: input.affects_payroll ?? false,\r\n    deduct_leave_balance: input.deduct_leave_balance ?? false,\r\n    approval_mode: input.approval_mode ?? \"any\",\r\n    min_approver_level: input.min_approver_level,\r\n    max_approver_level: input.max_approver_level,\r\n    display_order: input.display_order ?? 0,\r\n  })\r\n\r\n  if (error) {\r\n    console.error(\"Error creating request type:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function updateRequestType(\r\n  id: string,\r\n  input: Partial<{\r\n    name: string\r\n    description: string\r\n    requires_date_range: boolean\r\n    requires_single_date: boolean\r\n    requires_time: boolean\r\n    requires_time_range: boolean\r\n    requires_reason: boolean\r\n    requires_attachment: boolean\r\n    affects_attendance: boolean\r\n    affects_payroll: boolean\r\n    deduct_leave_balance: boolean\r\n    approval_mode: \"any\" | \"all\"\r\n    min_approver_level: number | null\r\n    max_approver_level: number | null\r\n    is_active: boolean\r\n    display_order: number\r\n  }>\r\n) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase\r\n    .from(\"request_types\")\r\n    .update(input)\r\n    .eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error updating request type:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function deleteRequestType(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  // Check if any requests use this type\r\n  const { data: requests } = await supabase\r\n    .from(\"employee_requests\")\r\n    .select(\"id\")\r\n    .eq(\"request_type_id\", id)\r\n    .limit(1)\r\n\r\n  if (requests && requests.length > 0) {\r\n    return { success: false, error: \"Không thể xóa loại phiếu đã có phiếu sử dụng\" }\r\n  }\r\n\r\n  const { error } = await supabase\r\n    .from(\"request_types\")\r\n    .delete()\r\n    .eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error deleting request type:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\n\r\n// =============================================\r\n// EMPLOYEE REQUESTS (Phiếu yêu cầu)\r\n// =============================================\r\n\r\nexport async function listEmployeeRequests(filters?: {\r\n  status?: string\r\n  request_type_id?: string\r\n  employee_id?: string\r\n}): Promise<EmployeeRequestWithRelations[]> {\r\n  const supabase = await createClient()\r\n\r\n  let query = supabase\r\n    .from(\"employee_requests\")\r\n    .select(`\r\n      *,\r\n      employee:employees!employee_id(id, full_name, employee_code, department_id),\r\n      approver:employees!approver_id(id, full_name),\r\n      request_type:request_types!request_type_id(*)\r\n    `)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (filters?.status) query = query.eq(\"status\", filters.status)\r\n  if (filters?.request_type_id) query = query.eq(\"request_type_id\", filters.request_type_id)\r\n  if (filters?.employee_id) query = query.eq(\"employee_id\", filters.employee_id)\r\n\r\n  const { data, error } = await query.limit(100)\r\n\r\n  if (error) {\r\n    console.error(\"Error listing employee requests:\", error)\r\n    return []\r\n  }\r\n\r\n  return (data || []) as EmployeeRequestWithRelations[]\r\n}\r\n\r\nexport async function getMyEmployeeRequests(): Promise<EmployeeRequestWithRelations[]> {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return []\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (!employee) return []\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"employee_requests\")\r\n    .select(`\r\n      *,\r\n      request_type:request_types!request_type_id(*),\r\n      approver:employees!approver_id(id, full_name)\r\n    `)\r\n    .eq(\"employee_id\", employee.id)\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"Error fetching my requests:\", error)\r\n    return []\r\n  }\r\n\r\n  return (data || []) as EmployeeRequestWithRelations[]\r\n}\r\n\r\nexport async function createEmployeeRequest(input: {\r\n  request_type_id: string\r\n  from_date?: string\r\n  to_date?: string\r\n  request_date?: string\r\n  request_time?: string\r\n  from_time?: string\r\n  to_time?: string\r\n  reason?: string\r\n  attachment_url?: string\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (!employee) return { success: false, error: \"Employee not found\" }\r\n\r\n  // Validate date range\r\n  if (input.from_date && input.to_date && input.from_date > input.to_date) {\r\n    return { success: false, error: \"Ngày bắt đầu phải trước ngày kết thúc\" }\r\n  }\r\n\r\n  const { error } = await supabase.from(\"employee_requests\").insert({\r\n    employee_id: employee.id,\r\n    request_type_id: input.request_type_id,\r\n    from_date: input.from_date,\r\n    to_date: input.to_date,\r\n    request_date: input.request_date,\r\n    request_time: input.request_time,\r\n    from_time: input.from_time,\r\n    to_time: input.to_time,\r\n    reason: input.reason,\r\n    attachment_url: input.attachment_url,\r\n    status: \"pending\",\r\n  })\r\n\r\n  if (error) {\r\n    console.error(\"Error creating employee request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function approveEmployeeRequest(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  const { error } = await supabase\r\n    .from(\"employee_requests\")\r\n    .update({\r\n      status: \"approved\",\r\n      approver_id: employee?.id,\r\n      approved_at: new Date().toISOString(),\r\n    })\r\n    .eq(\"id\", id)\r\n    .eq(\"status\", \"pending\")\r\n\r\n  if (error) {\r\n    console.error(\"Error approving request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function rejectEmployeeRequest(id: string, rejection_reason?: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  const { error } = await supabase\r\n    .from(\"employee_requests\")\r\n    .update({\r\n      status: \"rejected\",\r\n      approver_id: employee?.id,\r\n      approved_at: new Date().toISOString(),\r\n      rejection_reason,\r\n    })\r\n    .eq(\"id\", id)\r\n    .eq(\"status\", \"pending\")\r\n\r\n  if (error) {\r\n    console.error(\"Error rejecting request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function cancelEmployeeRequest(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase\r\n    .from(\"employee_requests\")\r\n    .delete()\r\n    .eq(\"id\", id)\r\n    .eq(\"status\", \"pending\")\r\n\r\n  if (error) {\r\n    console.error(\"Error canceling request:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\n\r\n// =============================================\r\n// REQUEST TYPE APPROVERS\r\n// =============================================\r\n\r\nexport async function listRequestTypeApprovers(requestTypeId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"request_type_approvers\")\r\n    .select(`\r\n      *,\r\n      employee:employees!approver_employee_id(id, full_name, employee_code),\r\n      position:positions!approver_position_id(id, name, level)\r\n    `)\r\n    .eq(\"request_type_id\", requestTypeId)\r\n    .order(\"display_order\", { ascending: true })\r\n\r\n  if (error) {\r\n    console.error(\"Error listing approvers:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function addRequestTypeApprover(input: {\r\n  request_type_id: string\r\n  approver_employee_id?: string\r\n  approver_position_id?: string\r\n  approver_role_code?: string\r\n  display_order?: number\r\n}) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"request_type_approvers\").insert({\r\n    request_type_id: input.request_type_id,\r\n    approver_employee_id: input.approver_employee_id,\r\n    approver_position_id: input.approver_position_id,\r\n    approver_role_code: input.approver_role_code,\r\n    display_order: input.display_order ?? 0,\r\n  })\r\n\r\n  if (error) {\r\n    console.error(\"Error adding approver:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function removeRequestTypeApprover(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase\r\n    .from(\"request_type_approvers\")\r\n    .delete()\r\n    .eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error removing approver:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\n// =============================================\r\n// REQUEST APPROVALS (Duyệt phiếu)\r\n// =============================================\r\n\r\nexport async function getRequestApprovals(requestId: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"request_approvals\")\r\n    .select(`\r\n      *,\r\n      approver:employees!approver_id(id, full_name, employee_code)\r\n    `)\r\n    .eq(\"request_id\", requestId)\r\n    .order(\"created_at\", { ascending: true })\r\n\r\n  if (error) {\r\n    console.error(\"Error getting approvals:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function approveRequestByApprover(requestId: string, comment?: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (!employee) return { success: false, error: \"Employee not found\" }\r\n\r\n  // Cập nhật trạng thái duyệt của người này\r\n  const { error: approvalError } = await supabase\r\n    .from(\"request_approvals\")\r\n    .upsert({\r\n      request_id: requestId,\r\n      approver_id: employee.id,\r\n      status: \"approved\",\r\n      comment,\r\n      approved_at: new Date().toISOString(),\r\n    }, { onConflict: \"request_id,approver_id\" })\r\n\r\n  if (approvalError) {\r\n    console.error(\"Error approving:\", approvalError)\r\n    return { success: false, error: approvalError.message }\r\n  }\r\n\r\n  // Kiểm tra xem phiếu đã đủ điều kiện duyệt chưa\r\n  await checkAndUpdateRequestStatus(requestId)\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function rejectRequestByApprover(requestId: string, comment?: string) {\r\n  const supabase = await createClient()\r\n\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n  if (!user) return { success: false, error: \"Not authenticated\" }\r\n\r\n  const { data: employee } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", user.id)\r\n    .single()\r\n\r\n  if (!employee) return { success: false, error: \"Employee not found\" }\r\n\r\n  // Cập nhật trạng thái từ chối\r\n  const { error: approvalError } = await supabase\r\n    .from(\"request_approvals\")\r\n    .upsert({\r\n      request_id: requestId,\r\n      approver_id: employee.id,\r\n      status: \"rejected\",\r\n      comment,\r\n      approved_at: new Date().toISOString(),\r\n    }, { onConflict: \"request_id,approver_id\" })\r\n\r\n  if (approvalError) {\r\n    console.error(\"Error rejecting:\", approvalError)\r\n    return { success: false, error: approvalError.message }\r\n  }\r\n\r\n  // Nếu 1 người từ chối thì phiếu bị từ chối\r\n  await supabase\r\n    .from(\"employee_requests\")\r\n    .update({\r\n      status: \"rejected\",\r\n      approver_id: employee.id,\r\n      approved_at: new Date().toISOString(),\r\n      rejection_reason: comment,\r\n    })\r\n    .eq(\"id\", requestId)\r\n    .eq(\"status\", \"pending\")\r\n\r\n  revalidatePath(\"/dashboard/leave\")\r\n  revalidatePath(\"/dashboard/leave-approval\")\r\n  return { success: true }\r\n}\r\n\r\nasync function checkAndUpdateRequestStatus(requestId: string) {\r\n  const supabase = await createClient()\r\n\r\n  // Lấy thông tin phiếu và loại phiếu\r\n  const { data: request } = await supabase\r\n    .from(\"employee_requests\")\r\n    .select(`\r\n      *,\r\n      request_type:request_types!request_type_id(approval_mode)\r\n    `)\r\n    .eq(\"id\", requestId)\r\n    .single()\r\n\r\n  if (!request || request.status !== \"pending\") return\r\n\r\n  const approvalMode = request.request_type?.approval_mode || \"any\"\r\n\r\n  // Lấy danh sách người duyệt đã duyệt\r\n  const { data: approvals } = await supabase\r\n    .from(\"request_approvals\")\r\n    .select(\"*\")\r\n    .eq(\"request_id\", requestId)\r\n\r\n  if (!approvals || approvals.length === 0) return\r\n\r\n  const approvedCount = approvals.filter(a => a.status === \"approved\").length\r\n  const rejectedCount = approvals.filter(a => a.status === \"rejected\").length\r\n\r\n  // Nếu có người từ chối -> phiếu bị từ chối\r\n  if (rejectedCount > 0) {\r\n    const rejector = approvals.find(a => a.status === \"rejected\")\r\n    await supabase\r\n      .from(\"employee_requests\")\r\n      .update({\r\n        status: \"rejected\",\r\n        approver_id: rejector?.approver_id,\r\n        approved_at: new Date().toISOString(),\r\n      })\r\n      .eq(\"id\", requestId)\r\n    return\r\n  }\r\n\r\n  // Kiểm tra điều kiện duyệt\r\n  if (approvalMode === \"any\" && approvedCount >= 1) {\r\n    // Chỉ cần 1 người duyệt\r\n    const approver = approvals.find(a => a.status === \"approved\")\r\n    await supabase\r\n      .from(\"employee_requests\")\r\n      .update({\r\n        status: \"approved\",\r\n        approver_id: approver?.approver_id,\r\n        approved_at: new Date().toISOString(),\r\n      })\r\n      .eq(\"id\", requestId)\r\n  } else if (approvalMode === \"all\") {\r\n    // Cần tất cả người duyệt\r\n    // Lấy số người duyệt được chỉ định\r\n    const { data: requiredApprovers } = await supabase\r\n      .from(\"request_type_approvers\")\r\n      .select(\"id\")\r\n      .eq(\"request_type_id\", request.request_type_id)\r\n\r\n    const requiredCount = requiredApprovers?.length || 1\r\n    \r\n    if (approvedCount >= requiredCount) {\r\n      const lastApprover = approvals.filter(a => a.status === \"approved\").pop()\r\n      await supabase\r\n        .from(\"employee_requests\")\r\n        .update({\r\n          status: \"approved\",\r\n          approver_id: lastApprover?.approver_id,\r\n          approved_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"id\", requestId)\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1008, "column": 0}, "map": {"version":3,"sources":["file:///E:/Pamo/v0-hrm/lib/actions/department-actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport type { Department, Position } from \"@/lib/types/database\"\r\n\r\nexport async function listDepartments(): Promise<Department[]> {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase.from(\"departments\").select(\"*\").order(\"name\")\r\n\r\n  if (error) {\r\n    console.error(\"Error listing departments:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function listPositions(): Promise<Position[]> {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase.from(\"positions\").select(\"*\").order(\"level\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"Error listing positions:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function createDepartment(data: { name: string; code?: string; parent_id?: string }) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"departments\").insert(data)\r\n\r\n  if (error) {\r\n    console.error(\"Error creating department:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function updateDepartment(id: string, data: { name?: string; code?: string; parent_id?: string | null }) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"departments\").update(data).eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error updating department:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function deleteDepartment(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  // Kiểm tra có nhân viên trong phòng ban không\r\n  const { count } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"*\", { count: \"exact\", head: true })\r\n    .eq(\"department_id\", id)\r\n\r\n  if (count && count > 0) {\r\n    return { success: false, error: \"Không thể xóa phòng ban đang có nhân viên\" }\r\n  }\r\n\r\n  const { error } = await supabase.from(\"departments\").delete().eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error deleting department:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n\r\n// =============================================\r\n// POSITION ACTIONS\r\n// =============================================\r\n\r\nexport async function createPosition(data: { name: string; level: number }) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"positions\").insert(data)\r\n\r\n  if (error) {\r\n    console.error(\"Error creating position:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function updatePosition(id: string, data: { name?: string; level?: number }) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"positions\").update(data).eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error updating position:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function deletePosition(id: string) {\r\n  const supabase = await createClient()\r\n\r\n  // Kiểm tra có nhân viên đang giữ vị trí này không\r\n  const { count } = await supabase\r\n    .from(\"employees\")\r\n    .select(\"*\", { count: \"exact\", head: true })\r\n    .eq(\"position_id\", id)\r\n\r\n  if (count && count > 0) {\r\n    return { success: false, error: \"Không thể xóa vị trí đang có nhân viên\" }\r\n  }\r\n\r\n  const { error } = await supabase.from(\"positions\").delete().eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error deleting position:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1188, "column": 0}, "map": {"version":3,"sources":["file:///E:/Pamo/v0-hrm/.next-internal/server/app/dashboard/leave-approval/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getMyRoles as '005e20e2e268d812762b030e4aac3b7693066871b6'} from 'ACTIONS_MODULE0'\nexport {getMyEmployee as '00636a7c2e61bd285b975ea815e7fbbefdffae959f'} from 'ACTIONS_MODULE0'\nexport {listEmployees as '00b0c7f0352396833a3aa70b738bb3a8c2a485efae'} from 'ACTIONS_MODULE0'\nexport {createEmployee as '4072cdebcca1df607d08f62096843ddf91d2cf29f6'} from 'ACTIONS_MODULE0'\nexport {updateMyProfile as '407a7f2085358134fb9b61998dbd9fa880ad52c2cf'} from 'ACTIONS_MODULE0'\nexport {getEmployee as '409df3c5b25ea33596f872aab0b186da47271a8e80'} from 'ACTIONS_MODULE0'\nexport {updateEmployee as '60e7529b55507157f11112b5c625757ac226a23a7c'} from 'ACTIONS_MODULE0'\nexport {changeDepartment as '701419c868154523741dd2880ac65e97064ceb8620'} from 'ACTIONS_MODULE0'\nexport {changePosition as '70daddb01ea9f495d095baa024616ddfa6ee94f8dd'} from 'ACTIONS_MODULE0'\nexport {getMyLeaveRequests as '004f8ac509d8c63ac1f75a13f400b490249a90aa6a'} from 'ACTIONS_MODULE1'\nexport {rejectLeaveRequest as '4055415c0a91f32fcfb6f35153606167c5e2561264'} from 'ACTIONS_MODULE1'\nexport {approveLeaveRequest as '4061c5d78bb72b7f647e5946c2c4d50669bd4b22db'} from 'ACTIONS_MODULE1'\nexport {listLeaveRequests as '408aaabafb56d86415bd6d2c5804f8915bb7c02357'} from 'ACTIONS_MODULE1'\nexport {cancelLeaveRequest as '408b2507420e745ac1bdcb3611fab83db88edf0f05'} from 'ACTIONS_MODULE1'\nexport {createLeaveRequest as '40d8fbd856953646de7ab8c23a0495f7b607391a05'} from 'ACTIONS_MODULE1'\nexport {getMyEmployeeRequests as '008be2ca4bee2ec84966320cd00837f66626ca1347'} from 'ACTIONS_MODULE2'\nexport {getRequestApprovals as '4001e7105a139387a0509394e2e0db7dfc08d5948c'} from 'ACTIONS_MODULE2'\nexport {deleteRequestType as '4001f5b476bfff3a2c782317b0a873fa3ce157f9e3'} from 'ACTIONS_MODULE2'\nexport {listRequestTypes as '400df82b9368ba41f00983bfcb4080b640da906f52'} from 'ACTIONS_MODULE2'\nexport {addRequestTypeApprover as '402436f981df17975bada56a175326306c7d07d00d'} from 'ACTIONS_MODULE2'\nexport {createEmployeeRequest as '40303d7fa344720c20fd5bd2fcc949559c493532ad'} from 'ACTIONS_MODULE2'\nexport {cancelEmployeeRequest as '4042d2e753b5d3275d2b2ce0738eec4afa6de6c872'} from 'ACTIONS_MODULE2'\nexport {removeRequestTypeApprover as '405ac148a59377d1a8e5ebb4cc152f48bb1472908a'} from 'ACTIONS_MODULE2'\nexport {createRequestType as '4060c92fb4e2af154ea44bebf77713deffc22c1acb'} from 'ACTIONS_MODULE2'\nexport {approveEmployeeRequest as '4070a717e158fe0e74f2cacf6158cc298ef92bdea8'} from 'ACTIONS_MODULE2'\nexport {listRequestTypeApprovers as '4081e4f12487ef5c2892434111f2730ad649562fc5'} from 'ACTIONS_MODULE2'\nexport {listEmployeeRequests as '40a1fd095b336a43be7c71d7bd81394def3ce560f6'} from 'ACTIONS_MODULE2'\nexport {getRequestType as '40ea16f216b0a3067bd2b40ff93a49362c88376c88'} from 'ACTIONS_MODULE2'\nexport {updateRequestType as '60173cbc597f2f482dcc28dd3b2e654e6ad40756d6'} from 'ACTIONS_MODULE2'\nexport {rejectEmployeeRequest as '60265134f63162c1dde5c5a4d6ccf4844254519069'} from 'ACTIONS_MODULE2'\nexport {rejectRequestByApprover as '6088ddda7e30236231128e7ada83151d0123a2b06e'} from 'ACTIONS_MODULE2'\nexport {approveRequestByApprover as '60c6eb32d071a5f878194192530f07934fee4abce3'} from 'ACTIONS_MODULE2'\nexport {listPositions as '00a7b0eb530c1dc0860ad907a2b4ca6b37a0b9a499'} from 'ACTIONS_MODULE3'\nexport {listDepartments as '00c65c5a01ab8a9197dc80e277b1c810297c84835b'} from 'ACTIONS_MODULE3'\nexport {deleteDepartment as '402616c2ab184155e396b1e6bcc02aabf0a6699775'} from 'ACTIONS_MODULE3'\nexport {createDepartment as '403f54aab920d72630f1950530679072dce425d89b'} from 'ACTIONS_MODULE3'\nexport {createPosition as '409e900c57851e187b3336b2167f1492044da6a704'} from 'ACTIONS_MODULE3'\nexport {deletePosition as '40aea3118faebbf9d172394b8bba6bb810349e9ab4'} from 'ACTIONS_MODULE3'\nexport {updatePosition as '6071aab31133d8547de504c62c5c9a87df6b39a753'} from 'ACTIONS_MODULE3'\nexport {updateDepartment as '607ed26f2ae230819db894ad494358f3f62fa91173'} from 'ACTIONS_MODULE3'\nexport {approveLeaveRequest as '4061c5d78bb72b7f647e5946c2c4d50669bd4b22db'} from 'ACTIONS_MODULE1'\nexport {rejectLeaveRequest as '4055415c0a91f32fcfb6f35153606167c5e2561264'} from 'ACTIONS_MODULE1'\nexport {approveEmployeeRequest as '4070a717e158fe0e74f2cacf6158cc298ef92bdea8'} from 'ACTIONS_MODULE2'\nexport {rejectEmployeeRequest as '60265134f63162c1dde5c5a4d6ccf4844254519069'} from 'ACTIONS_MODULE2'\nexport {createRequestType as '4060c92fb4e2af154ea44bebf77713deffc22c1acb'} from 'ACTIONS_MODULE2'\nexport {updateRequestType as '60173cbc597f2f482dcc28dd3b2e654e6ad40756d6'} from 'ACTIONS_MODULE2'\nexport {deleteRequestType as '4001f5b476bfff3a2c782317b0a873fa3ce157f9e3'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AASA;AAMA;AAiBA"}}]
}