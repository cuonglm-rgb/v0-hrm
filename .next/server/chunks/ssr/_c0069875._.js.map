{"version":3,"sources":["../../../../lib/actions/department-actions.ts","../../../../.next-internal/server/app/dashboard/employees/new/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["\"use server\"\r\n\r\nimport { createClient } from \"@/lib/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport type { Department, Position } from \"@/lib/types/database\"\r\n\r\nexport async function listDepartments(): Promise<Department[]> {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase.from(\"departments\").select(\"*\").order(\"name\")\r\n\r\n  if (error) {\r\n    console.error(\"Error listing departments:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function listPositions(): Promise<Position[]> {\r\n  const supabase = await createClient()\r\n\r\n  const { data, error } = await supabase.from(\"positions\").select(\"*\").order(\"level\", { ascending: false })\r\n\r\n  if (error) {\r\n    console.error(\"Error listing positions:\", error)\r\n    return []\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\nexport async function createDepartment(data: { name: string; code?: string; parent_id?: string }) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"departments\").insert(data)\r\n\r\n  if (error) {\r\n    console.error(\"Error creating department:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n\r\nexport async function updateDepartment(id: string, data: { name?: string; code?: string; parent_id?: string | null }) {\r\n  const supabase = await createClient()\r\n\r\n  const { error } = await supabase.from(\"departments\").update(data).eq(\"id\", id)\r\n\r\n  if (error) {\r\n    console.error(\"Error updating department:\", error)\r\n    return { success: false, error: error.message }\r\n  }\r\n\r\n  revalidatePath(\"/dashboard/departments\")\r\n  return { success: true }\r\n}\r\n","export {listEmployees as '00615a52a55e0a543ef75e5baea30072c1753e165d'} from 'ACTIONS_MODULE0'\nexport {getMyRoles as '00883990eb87fcbb43d391263ac0e80258f50fa142'} from 'ACTIONS_MODULE0'\nexport {getMyEmployee as '00b03b68086147c4f3c87b418d7c215dd6cb117979'} from 'ACTIONS_MODULE0'\nexport {updateMyProfile as '4079a4797cba7170c9f24cb929d39c5458459914fe'} from 'ACTIONS_MODULE0'\nexport {createEmployee as '40ddf02cc5e4765fa3a030fd637e5f355c5f442611'} from 'ACTIONS_MODULE0'\nexport {getEmployee as '40e459b772c74c679b1dae2e3f27180379dec5296b'} from 'ACTIONS_MODULE0'\nexport {updateEmployee as '602895f5cf22992ec5b7c548983ba3ab1dbcb8093a'} from 'ACTIONS_MODULE0'\nexport {listPositions as '0031c11a418a59d70344f445ed7cb987eb2d1bd072'} from 'ACTIONS_MODULE1'\nexport {listDepartments as '00cb34bb7586d41871dfb9563a4a3bb133f4f4fb9c'} from 'ACTIONS_MODULE1'\nexport {createDepartment as '40d43bd0abacbac93f2bc354b1ff4c566d9c7aa34b'} from 'ACTIONS_MODULE1'\nexport {updateDepartment as '60f9a1ddfff114a346f6210ccc32da65669ccd624a'} from 'ACTIONS_MODULE1'\nexport {createEmployee as '40ddf02cc5e4765fa3a030fd637e5f355c5f442611'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"uDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGO,eAAe,IACpB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAE7B,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,eAAe,MAAM,CAAC,KAAK,KAAK,CAAC,eAE7E,AAAI,GACF,IADS,IACD,KAAK,CAAC,6BAA8B,GACrC,EAAE,EAGJ,GAAQ,EAAE,AACnB,CAEO,eAAe,IACpB,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAE7B,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,aAAa,MAAM,CAAC,KAAK,KAAK,CAAC,QAAS,CAAE,WAAW,CAAM,UAEvG,AAAI,GACF,IADS,IACD,KAAK,CAAC,2BAA4B,GACnC,EAAE,EAGJ,GAAQ,EAAE,AACnB,CAEO,eAAe,EAAiB,CAAyD,EAC9F,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAE7B,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,eAAe,MAAM,CAAC,UAE5D,AAAI,GACF,IADS,IACD,KAAK,CAAC,6BAA8B,GACrC,CAAE,QAAS,GAAO,MAAO,EAAM,OAAO,AAAC,IAGhD,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,0BACR,CAAE,SAAS,CAAK,EACzB,CAEO,eAAe,EAAiB,CAAU,CAAE,CAAiE,EAClH,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAE7B,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,eAAe,MAAM,CAAC,GAAM,EAAE,CAAC,KAAM,UAE3E,AAAI,GACF,IADS,IACD,KAAK,CAAC,6BAA8B,GACrC,CAAE,QAAS,GAAO,MAAO,EAAM,OAAO,AAAC,IAGhD,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,0BACR,CAAE,SAAS,CAAK,EACzB,0CApDsB,EAaA,EAaA,EAcA,IAxCA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAaA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAaA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAcA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,qIC9CtB,IAAA,EAAA,EAAA,CAAA,CAAA,OAOA,EAAA,EAAA,CAAA,CAAA"}